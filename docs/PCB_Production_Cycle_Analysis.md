# PCB Production Cycle（生产周期）公式分析与优化建议

## 1. 公式设计背景

本项目的Production Cycle（生产周期）自动计算公式，参考了PCBWay、JLCPCB等主流PCB打样/小批量平台的行业规则，并结合了实际工厂生产经验。目标是让用户在填写表单时，能即时获得合理、透明的生产周期预估。

## 2. 公式结构与字段影响

### 2.1 公式主结构
- 以2层FR-4常规板为基准，最快1天（24小时）出货
- 层数、板材、面积、数量、特殊工艺、服务、加急、下单时间等均会影响周期
- 每项影响均有详细加时/减时说明，便于维护和扩展

### 2.2 字段影响明细
- **层数（layers）**：每多2层+1天
- **板材类型（pcbType）**：FR-4不加时，特殊板材+1天
- **铜厚（copperWeight）**：>2oz加1天
- **表面处理（surfaceFinish）**：ENIG/沉银/沉锡等+1天
- **最小线宽/线距（minTrace）**：≤4mil加1天
- **最小孔径（minHole）**：≤0.2mm加1天
- **板色/阻焊色（boardColor/solderMask）**：特殊色+1天
- **拼板数（panelCount）**：多Panel加1天
- **面积/数量（singleLength/singleWidth/quantity）**：大面积/大批量加1天
- **批量（quantity）**：>1000片加1天
- **HDI工艺（hdi）**：1step+1天，2/3step+2天
- **金手指/阻抗/边镀金/半孔/SMT/飞针测试等**：每项+1天，SMT+2天
- **服务类（qualityAttach/productReport）**：全检/报告+1天
- **加急服务（delivery）**：最多-2天，最快1天
- **下单时间**：20:00后下单顺延1天

### 2.3 公式示例（伪代码）
详见项目`page.tsx`中的`calcProductionCycle`函数。

## 3. 行业对比与合理性分析

- 公式已覆盖主流PCB打样平台的主要影响因素，结构清晰，便于维护。
- 细致考虑了铜厚、表面处理、线宽、拼板、特殊色、批量等实际生产影响。
- 加急服务、HDI等特殊工艺分级处理，贴近行业实际。
- 下单时间cutoff放宽到20:00，适应更多工厂排产。

## 4. 公式优化建议

### 4.1 进一步可优化点
1. **节假日/周末**：可结合工厂排产日历，自动顺延节假日。
2. **工厂产能/渠道差异**：如有多工厂/多渠道，可按工厂/渠道切换加时规则。
3. **特殊工艺细分**：如盲埋孔、特殊叠层、特殊阻焊等可继续细化加时。
4. **大客户/定制单**：如有VIP客户或定制单，可单独配置周期。
5. **明细展示**：前端可展示所有影响项明细，提升用户信任。
6. **后端统一**：如业务复杂，建议将周期逻辑后端化，前端仅展示。

### 4.2 公式维护建议
- 所有加时/减时项均以对象表或常量维护，便于灵活调整。
- 公式结构应保持清晰，便于团队协作和后期扩展。
- 可结合实际工厂生产数据，定期回顾和优化加时规则。

## 5. 总结

本Production Cycle自动计算公式已覆盖绝大多数PCB打样/小批量场景，结构清晰、易维护、易扩展。后续可根据实际业务需求和工厂产能持续优化。

如需进一步优化或有特殊业务场景，建议结合实际工厂生产排期和行业最新规则持续完善。 